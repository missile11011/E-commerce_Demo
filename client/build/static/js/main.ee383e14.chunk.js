(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{111:function(e,t,c){},112:function(e,t,c){},123:function(e,t,c){},125:function(e,t,c){},136:function(e,t,c){},138:function(e,t,c){"use strict";c.r(t);var n,s,r,a,i,l,o=c(1),j=c.n(o),d=c(39),b=c.n(d),u=(c(109),c(110),c(111),c(13)),h=(c.p,c(112),c(21)),O=c(156),x=c(158),p=c(151),m=c(159),f=c(152),v=c(146),g="UPDATE_PRODUCTS",y="UPDATE_PRODUCT",w="UPDATE_AMOUNT",k="ADD_TO_CART",S="UPDATE_CART",P="TOGGLE_CART",N=c(17),E=c(44),L=c(157),T=Object(L.a)(n||(n=Object(E.a)(["\n\t{\n\t\tuser {\n\t\t\tfirstName\n\t\t\tlastName\n\t\t\temail\n\t\t\torders {\n\t\t\t\t_id\n\t\t\t\tpurchaseDate\n\t\t\t\tproducts {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t\tdescription\n\t\t\t\t\tprice\n\t\t\t\t\tquantity\n\t\t\t\t\timage\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),C=Object(L.a)(s||(s=Object(E.a)(["\n\t{\n\t\tproducts {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\timage\n\t\t}\n\t}\n"]))),_=Object(L.a)(r||(r=Object(E.a)(["\n\tquery Product($product: String!) {\n\t\tproduct(_id: $product) {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\timage\n\t\t\tquantity\n\t\t}\n\t}\n"]))),I=(Object(L.a)(a||(a=Object(E.a)(["\n\tquery getCheckout($products: [ID]!) {\n\t\tcheckout(products: $products) {\n\t\t\tsession\n\t\t}\n\t}\n"]))),c(123),c(0)),R=function(e){var t=e.item;Object(N.b)(),Object(N.c)((function(e){return e}));return Object(I.jsx)("div",{class:"py-3",children:Object(I.jsxs)("div",{class:"row justify-content-evenly py-3 cart-item-shadow",children:[Object(I.jsx)("img",{class:"img-thumbnail h-100 col-3 mx-2 my-auto",src:t.image}),Object(I.jsx)("p",{class:"col-4",children:t.name}),Object(I.jsxs)("p",{class:"col-2",children:["$",t.price]}),Object(I.jsxs)("p",{class:"col-2",children:["QTY:",t.purchaseQuantity]})]})})},A=c(23),F=c(24),U=c(77),D=new(function(){function e(){Object(A.a)(this,e)}return Object(F.a)(e,[{key:"getProfile",value:function(){return Object(U.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(U.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),$=(c(125),function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e})),c=t.cart,n=t.cartOpen,s=Object(v.a)(T),r=(s.loading,s.data),a=function(){e({type:P})},i=function(){var e=0;return c.map((function(t){e+=t.price*t.purchaseQuantity})),e.toFixed(2)},l=function(){if(0===Object.keys(c).length)return Object(I.jsx)("h1",{class:"text-center",children:"Empty"})};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(x.a,{variant:"light",className:"py-0 bg-black",children:Object(I.jsxs)(p.a,{fluid:!0,children:[Object(I.jsx)(x.a.Brand,{className:"text-white",as:h.b,to:"/",children:"Demo"}),Object(I.jsxs)("div",{class:"row inline",children:[Object(I.jsxs)(m.a,{inline:!0,as:f.a,children:[Object(I.jsx)(m.a.Group,{children:Object(I.jsx)(m.a.Control,{type:"search",placeholder:"search"})}),Object(I.jsx)("button",{class:"px-3 m-2 btn btn-outline-success",variant:"outline-success",type:"submit",children:"Search"})]}),function(){return D.loggedIn()?r?(e=r.user,Object(I.jsxs)(O.a,{className:"m-3",children:[Object(I.jsxs)(O.a.Toggle,{variant:"primary",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:["Hello, ",e.firstName]}),Object(I.jsxs)(O.a.Menu,{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(I.jsx)(h.b,{to:"/account",children:Object(I.jsx)("a",{class:"dropdown-item",children:"Account"})}),Object(I.jsx)(O.a.Item,{class:"dropdown-item",href:"#",children:"Order History"}),Object(I.jsx)(O.a.Divider,{}),Object(I.jsx)(O.a.Item,{class:"dropdown-item",onClick:function(){return D.logout()},children:"Logout"})]})]})):void 0:Object(I.jsx)(h.b,{to:"/login",children:Object(I.jsx)("button",{class:" m-3 inline btn btn-primary",children:"Login"})});var e}(),n?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("a",{onClick:a,children:Object(I.jsx)("i",{class:"text-white bi bi-bag-x bag-icon"})})}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("a",{class:"",href:"#",onClick:a,children:[Object(I.jsx)("i",{class:"bi bi-bag-fill bag-icon my-auto "}),Object(I.jsx)("span",{class:"text-dark text-center cart-items align-text-bottom",children:c.length})]})})]})]})}),function(){if(n)return Object(I.jsxs)("div",{class:"col-5 cart-menu bg-light p-3 rounded border",children:[Object(I.jsx)("a",{class:"row justify-content-end px-4 py-auto",onClick:a,children:Object(I.jsx)("i",{class:" bi-x-circle-fill text-danger"})}),Object(I.jsxs)("div",{class:"cart-list overflow-scroll col",children:[c.map((function(e){return Object(I.jsx)(R,{item:e},e.id)})),l()]}),Object(I.jsxs)("h2",{children:["Total: $",i()]}),Object(I.jsx)(h.b,{to:"/cart",children:Object(I.jsx)("button",{class:"btn rounded-pill btn-primary",children:"Checkout"})})]})}()]})}),B=function(){return Object(I.jsx)("div",{children:Object(I.jsx)("h1",{class:"align-center text-center py-5",children:"Hello"})})},G=c(153),W=(c(136),function(e){var t=e._id,c=e.name,n=e.price,s=(e.quantity,e.image),r=Object(N.b)(),a=Object(N.c)((function(e){return e})).cart;return Object(I.jsxs)("div",{class:"item-container col text-center my-3",children:[Object(I.jsx)(h.b,{to:"/item/".concat(t),children:Object(I.jsxs)("div",{class:"text-dark text-center mb-1",children:[Object(I.jsx)("div",{class:"item-image-container",children:Object(I.jsx)("img",{class:"img-fluid item-image p-3",src:s})}),Object(I.jsx)("p",{class:"font-weight-bold item-title align-text-bottom overflow-hidden px-1",children:c}),Object(I.jsxs)("span",{class:"item-price",children:["$",n]}),Object(I.jsx)("br",{})]})}),Object(I.jsx)("button",{class:"btn btn-primary rounded-pill",onClick:function(){var c=a.find((function(e){return e._id===t}));r(c?{type:S,_id:t,purchaseQuantity:parseInt(c.purchaseQuantity)+1}:{type:k,product:Object(u.a)(Object(u.a)({},e),{},{purchaseQuantity:1})})},children:"Add to Cart"})]})}),q=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e})),c=Object(v.a)(C),n=c.loading,s=c.data;t.products;return Object(o.useEffect)((function(){s?(e({type:g,products:s.products}),console.log("data",s)):n&&console.log("loading",n)}),[s,e]),Object(I.jsx)("div",{children:Object(I.jsx)("div",{class:"container",children:Object(I.jsx)("div",{class:"row align-items-center",children:t.products.map((function(e){return Object(I.jsx)("div",{class:"col-3 ",children:Object(I.jsx)(W,{_id:e._id,name:e.name,price:e.price,quantity:e.quantity,image:e.image},e._id)})}))})})})},Q=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(B,{}),Object(I.jsx)(G.a,{fluid:!0,className:"bg-white",children:Object(I.jsx)(p.a,{children:Object(I.jsx)(q,{})})})]})},H=c(51),M=c(27),Y=c.n(M),J=c(41),K=c(14),z=c(94),Z=c(154),V=Object(L.a)(i||(i=Object(E.a)(["\n\tmutation login($email: String!, $password: String!) {\n\t\tlogin(email: $email, password: $password) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),X=Object(L.a)(l||(l=Object(E.a)(["\n\tmutation createUser($email: String!, $password: String!, $firstName: String!, $lastName: String!){\n\t\tcreateUser(email: $email, password: $password, firstname: $firstName, lastname: $lastName){\n\t\t\ttoken\n\t\t\tuser{\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),ee=function(){var e=Object(o.useState)({email:"",password:""}),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(Z.a)(V),r=Object(K.a)(s,2),a=r[0],i=r[1].error,l=function(){var e=Object(J.a)(Y.a.mark((function e(t){var n,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a({variables:{email:c.email,password:c.password}});case 4:n=e.sent,s=n.data.login.token,D.login(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(J.a)(Y.a.mark((function e(t){var s,r,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target,r=s.name,a=s.value,n(Object(u.a)(Object(u.a)({},c),{},Object(H.a)({},r,a)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("div",{class:"col-6 mx-auto py-4",children:Object(I.jsxs)("div",{class:"border bg-light rounded rounded-3 p-4",children:[Object(I.jsx)("h1",{class:"text-center",children:"Login"}),Object(I.jsxs)(m.a,{onSubmit:l,children:[Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"email",children:[Object(I.jsx)(m.a.Label,{children:"Email address:"}),Object(I.jsx)(m.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:j}),Object(I.jsx)(m.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"password",children:[Object(I.jsx)(m.a.Label,{children:"Password:"}),Object(I.jsx)(m.a.Control,{name:"password",type:"password",placeholder:"Password",onChange:j})]}),Object(I.jsx)("div",{class:"d-flex mx-auto my-2 justify-content-center",children:Object(I.jsx)(z.a,{variant:"primary",type:"submit",children:"Submit"})}),i?Object(I.jsx)("div",{children:Object(I.jsx)("p",{class:"text-center",children:"incorrect email or password"})}):null]}),Object(I.jsx)(h.b,{to:"/signup",children:Object(I.jsx)("a",{class:"d-flex justify-content-center p-3",children:"Create an account and sign up"})})]})})},te=c(95),ce=function(){var e=Object(o.useState)({email:"",password:"",firstName:"",lastName:""}),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(Z.a)(X),r=Object(K.a)(s,2),a=r[0],i=r[1].error,l=function(){var e=Object(J.a)(Y.a.mark((function e(t){var s,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.password!==c.confirmPassword){e.next=4;break}return n(Object(u.a)(Object(u.a)({},c),{},{validPassword:c.password})),e.abrupt("return",console.log("Password match"));case 4:return e.prev=4,e.next=7,a({variables:{email:c.email,password:c.validPassword,firstName:c.firstName,lastName:c.lastName}});case 7:s=e.sent,r=s.data.createUser.token,D.login(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(J.a)(Y.a.mark((function e(t){var s,r,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target,r=s.name,a=s.value,n(Object(u.a)(Object(u.a)({},c),{},Object(H.a)({},r,a)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("div",{class:"col-6 mx-auto py-4",children:Object(I.jsxs)("div",{class:"border bg-light rounded rounded-3 p-4",children:[Object(I.jsx)("h1",{class:"text-center",children:"Signup"}),Object(I.jsxs)(m.a,{onSubmit:l,children:[Object(I.jsxs)(f.a,{children:[Object(I.jsx)(te.a,{children:Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"firstName",children:[Object(I.jsx)(m.a.Label,{children:"First name:"}),Object(I.jsx)(m.a.Control,{name:"firstName",type:"firstName",placeholder:"John",onChange:j})]})}),Object(I.jsx)(te.a,{children:Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"lastName",children:[Object(I.jsx)(m.a.Label,{children:"Last name:"}),Object(I.jsx)(m.a.Control,{name:"lastName",type:"lastName",placeholder:"Doe",onChange:j})]})})]}),Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"email",children:[Object(I.jsx)(m.a.Label,{children:"Email address:"}),Object(I.jsx)(m.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:j}),Object(I.jsx)(m.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"password",children:[Object(I.jsx)(m.a.Label,{children:"Password:"}),Object(I.jsx)(m.a.Control,{name:"password",type:"password",placeholder:"Password",onChange:j})]}),Object(I.jsxs)(m.a.Group,{className:"mb-3",controlId:"confirmPassword",children:[Object(I.jsx)(m.a.Label,{children:"Confirm Password:"}),Object(I.jsx)(m.a.Control,{name:"confirmPassword",type:"confirmPassword",placeholder:"Password",onChange:j})]}),Object(I.jsx)("div",{class:"d-flex my-2 justify-content-center",children:Object(I.jsx)(z.a,{variant:"primary",type:"submit",children:"Submit"})}),i?Object(I.jsx)("div",{children:Object(I.jsx)("p",{class:"",children:"make sure all fields are required"})}):null]})]})})},ne=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(p.a,{fluid:!0,className:"bg-dark",children:[Object(I.jsxs)(f.a,{children:[Object(I.jsx)("div",{class:"col-6 col-md-8 col-lg-7",children:Object(I.jsxs)("div",{class:"row text-center m-auto",children:[Object(I.jsx)("div",{class:"col-sm-6 col-md-4 col-lg-4 col-12 py-4",children:Object(I.jsxs)("ul",{class:"list-unstyled",children:[Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]})]})}),Object(I.jsx)("div",{class:"col-sm-6 col-md-4 col-lg-4 col-12 py-4",children:Object(I.jsxs)("ul",{class:"list-unstyled",children:[Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]}),Object(I.jsxs)("li",{class:"btn-link",children:[" ",Object(I.jsx)("a",{children:"Link anchor"})," "]})]})})]})}),Object(I.jsxs)("div",{class:"col-md-4 col-lg-5 col-6 py-4",children:[Object(I.jsxs)("address",{class:"text-white",children:[Object(I.jsx)("strong",{children:"MyStoreFront, Inc."}),Object(I.jsx)("br",{}),"Indian Treasure Link",Object(I.jsx)("br",{}),"Quitman, WA, 99110-0219",Object(I.jsx)("br",{}),Object(I.jsx)("abbr",{title:"Phone",children:"P:"})," (123) 456-7890"]}),Object(I.jsxs)("address",{class:"text-white",children:[Object(I.jsx)("strong",{children:"Full Name"}),Object(I.jsx)("br",{}),Object(I.jsx)("a",{href:"mailto:#",children:"first.last@example.com"})]})]})]}),Object(I.jsx)(f.a,{children:Object(I.jsx)("p",{class:"text-white m-auto p-2",children:"\xa92021 copyrihgt"})})]})})},se=function(){var e,t=Object(v.a)(T),c=(t.loading,t.error,t.data);return Object(I.jsxs)(f.a,{className:"justify-content-md-center py-5",children:[Object(I.jsxs)(te.a,{md:6,children:[Object(I.jsx)("h1",{children:"Account Info:"}),function(){if(c)return e=c.user,Object(I.jsxs)("div",{class:"",children:[Object(I.jsxs)("h4",{children:["Name: ",e.firstName," ",e.lastName]}),Object(I.jsxs)("h4",{children:["Email: ",e.email]})]})}()]}),Object(I.jsx)("a",{class:"text-decoration-underline fs-1",children:"Logout"})]})},re=function(e){var t=e.match,c=Object(N.b)(),n=Object(N.c)((function(e){return e})),s=t.params._id,r=Object(v.a)(_,{variables:{product:s}}),a=(r.loading,r.data),i=n.product,l=n.amount;return Object(o.useEffect)((function(){a&&c({type:y,product:a.product})}),[a]),Object(I.jsx)("div",{class:"container my-auto",children:Object(I.jsxs)("div",{class:"row m-4 justify-content-center",children:[Object(I.jsx)("img",{class:"col-sm-10 h-100 col-lg-5 p-3 my-auto",src:i.image}),Object(I.jsxs)("div",{class:"col justify-content-left",children:[Object(I.jsx)("div",{class:"title-text",children:i.name}),Object(I.jsx)("div",{class:"fs-2 description-text",children:i.description}),Object(I.jsxs)("div",{class:"py-3 price-text",children:["$",i.price]}),Object(I.jsxs)("div",{class:"row px-3",children:[Object(I.jsx)("div",{class:"text-left",children:Object(I.jsx)("button",{class:"btn btn-primary rounded-pill ",children:"add to cart"})}),Object(I.jsxs)("div",{class:"row px-5",children:[Object(I.jsx)("button",{class:"btn btn-dark rounded-pill",onClick:function(){l>0&&c({type:w,amount:l-1})},children:Object(I.jsx)("i",{class:"bi bi-dash"})}),Object(I.jsx)("p",{class:"px-2 my-auto",children:l}),Object(I.jsx)("button",{class:"btn btn-dark rounded-pill",onClick:function(){c({type:w,amount:l+1})},children:Object(I.jsx)("i",{class:"bi bi-plus"})})]})]})]})]})})},ae=function(){var e=Object(N.c)((function(e){return e})).cart,t=parseFloat(12*Object.keys(e).length).toFixed(2),c=function(){var t=0;return e.map((function(e){t+=e.price*e.purchaseQuantity})),parseFloat(t.toFixed(2))};return Object(I.jsxs)("div",{class:"container",children:[Object(I.jsx)("h1",{children:"cart"}),Object(I.jsxs)("div",{class:"row",children:[Object(I.jsx)("div",{class:"col-7 ",children:e.map((function(e){return Object(I.jsx)("div",{children:Object(I.jsx)(R,{item:e},e.id)})}))}),Object(I.jsxs)("div",{class:"col-4 align-self-start border mx-auto m-3",children:[Object(I.jsx)("h1",{class:"row p-2",children:"Summary"}),Object(I.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(I.jsx)("h4",{children:"Subtotal:"}),Object(I.jsxs)("h5",{class:"",children:["$",c()]})]}),Object(I.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(I.jsx)("h4",{children:"Shipping:"}),Object(I.jsxs)("h5",{class:"",children:["$",t]})]}),Object(I.jsx)("p",{class:"row px-3",children:"Estimate fixed-rate"}),Object(I.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(I.jsx)("h4",{children:"tax:"}),Object(I.jsx)("h5",{class:""})]}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{class:"row d-flex justify-content-between align-items-center px-3",children:[Object(I.jsx)("h3",{children:"Total:"}),Object(I.jsxs)("h5",{class:"",children:["$",parseFloat(t)+parseFloat(c())]})]}),Object(I.jsx)("div",{class:"row",children:Object(I.jsx)(h.b,{to:"/checkout",children:Object(I.jsx)("button",{class:"btn btn-primary rounded-pill m-3 mx-auto",children:"Checkout"})})})]})]})]})},ie=c(96),le=c(56);function oe(e){var t=e.total,c=Object(le.useStripe)(),n=Object(le.useElements)(),s=Object(o.useState)(null),r=Object(K.a)(s,2),a=r[0],i=r[1],l=Object(o.useState)(!1),j=Object(K.a)(l,2),d=j[0],b=j[1];Object(o.useEffect)((function(){if(c){var e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");e&&c.retrievePaymentIntent(e).then((function(e){switch(e.paymentIntent.status){case"succeeded":i("Payment succeeded!");break;case"processing":i("Your payment is processing.");break;case"requires_payment_method":i("Your payment was not successful, please try again.");break;default:i("Something went wrong.")}}))}}),[c]);var u=function(){var e=Object(J.a)(Y.a.mark((function e(t){var s,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c&&n){e.next=3;break}return e.abrupt("return");case 3:return b(!0),e.next=6,c.confirmPayment({elements:n,confirmParams:{return_url:"http://localhost:3000/checkout"}});case 6:s=e.sent,"card_error"===(r=s.error).type||"validation_error"===r.type?i(r.message):i("An unexpected error occured."),b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("form",{id:"payment-form",onSubmit:u,children:[Object(I.jsx)("h1",{children:"Payment"}),Object(I.jsx)(le.PaymentElement,{id:"payment-element"}),Object(I.jsx)("button",{class:"btn btn-primary rounded m-3",disabled:d||!c||!n,id:"submit",children:Object(I.jsx)("span",{id:"button-text",children:d?Object(I.jsxs)("div",{className:"spinner",id:"spinner",children:[Object(I.jsx)("strong",{children:"Loading..."}),Object(I.jsx)("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]}):"Pay now"})}),Object(I.jsxs)("p",{children:["charge amount",t]}),a&&Object(I.jsx)("div",{id:"payment-message",children:a})]})}var je=function(){return Object(I.jsxs)("form",{children:[Object(I.jsxs)("div",{class:"row mb-4",children:[Object(I.jsx)("div",{class:"col",children:Object(I.jsxs)("div",{class:"form-outline",children:[Object(I.jsx)("input",{type:"text",id:"form7Example1",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example1",children:"First name"})]})}),Object(I.jsx)("div",{class:"col",children:Object(I.jsxs)("div",{class:"form-outline",children:[Object(I.jsx)("input",{type:"text",id:"form7Example2",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example2",children:"Last name"})]})})]}),Object(I.jsxs)("div",{class:"form-outline mb-4",children:[Object(I.jsx)("input",{type:"text",id:"form7Example3",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example3",children:"Company name"})]}),Object(I.jsxs)("div",{class:"form-outline mb-4",children:[Object(I.jsx)("input",{type:"text",id:"form7Example4",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example4",children:"Address"})]}),Object(I.jsxs)("div",{class:"input-group row mb-4",children:[Object(I.jsxs)("div",{class:"col",children:[Object(I.jsxs)("select",{class:"form-control",children:[Object(I.jsx)("option",{selected:!0,children:"- Select -"}),Object(I.jsx)("option",{value:"APT",children:"APT - Apartment"}),Object(I.jsx)("option",{value:"BSMT",children:"BSMT - Basement"}),Object(I.jsx)("option",{value:"BLDG",children:"BLDG - Building"}),Object(I.jsx)("option",{value:"DEPT",children:"DEPT - Department"}),Object(I.jsx)("option",{value:"FL",children:"FL - Floor"}),Object(I.jsx)("option",{value:"FRNT",children:"FRNT - Front"}),Object(I.jsx)("option",{value:"HNGR",children:"HNGR - Hanger"}),Object(I.jsx)("option",{value:"KEY",children:"KEY - Key"}),Object(I.jsx)("option",{value:"LBBY",children:"LBBY - Lobby"}),Object(I.jsx)("option",{value:"LOT",children:"LOT - Lot"}),Object(I.jsx)("option",{value:"LOWR",children:"LOWR - Lower"}),Object(I.jsx)("option",{value:"OFC",children:"OFC - Office"}),Object(I.jsx)("option",{value:"OTHER",children:"Other"}),Object(I.jsx)("option",{value:"PH",children:"PH - Penthouse"}),Object(I.jsx)("option",{value:"PIER",children:"PIER - Pier"}),Object(I.jsx)("option",{value:"REAR",children:"REAR - Rear"}),Object(I.jsx)("option",{value:"RM",children:"RM - Room"}),Object(I.jsx)("option",{value:"SIDE",children:"SIDE - Side"}),Object(I.jsx)("option",{value:"SLIP",children:"SLIP - Slip"}),Object(I.jsx)("option",{value:"SPC",children:"SPC - Space"}),Object(I.jsx)("option",{value:"STOP",children:"STOP - Stop"}),Object(I.jsx)("option",{value:"STE",children:"STE - Suite"}),Object(I.jsx)("option",{value:"TRLR",children:"TRLR - Trailer"}),Object(I.jsx)("option",{value:"UNAVAILABLE",children:"Unable to determine"}),Object(I.jsx)("option",{value:"UNIT",children:"UNIT - Unit"}),Object(I.jsx)("option",{value:"UPPR",children:"UPPR - Upper"})]}),Object(I.jsx)("label",{class:"form-label",for:"apt-suite-other",children:"Unit type"})]}),Object(I.jsxs)("div",{class:"col",children:[Object(I.jsx)("input",{class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"",children:"unit number"})]})]}),Object(I.jsxs)("div",{class:"form-outline mb-4 row",children:[Object(I.jsxs)("div",{class:"col inline-block",children:[Object(I.jsx)("input",{class:"form-control",type:"text",id:"city"}),Object(I.jsx)("label",{class:"form-label",children:"City"})]}),Object(I.jsxs)("div",{class:"col",children:[Object(I.jsx)("input",{class:"form-control",type:"text"}),Object(I.jsx)("label",{class:"form-label",children:"state"})]})]}),Object(I.jsxs)("div",{class:"form-outline mb-4",children:[Object(I.jsx)("input",{type:"email",id:"form7Example5",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example5",children:"Email"})]}),Object(I.jsxs)("div",{class:"form-outline mb-4",children:[Object(I.jsx)("input",{type:"number",id:"form7Example6",class:"form-control"}),Object(I.jsx)("label",{class:"form-label",for:"form7Example6",children:"Phone"})]})]})},de=function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Shipping Address"}),Object(I.jsx)(je,{type:"shipping"})]})},be=Object(ie.a)("pk_test_51KYfOOHOMpPyIznJJw8smgIiP7aaOygzJAcRCiNvZYzZq0lz5NJumR9QnhS1xZCSf1KcPAUYKZHo2tU2NmlLTJvO00kR88grXB");function ue(){var e=Object(o.useState)(""),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(o.useState)(0),r=Object(K.a)(s,2),a=r[0],i=r[1],l=Object(o.useState)(1),j=Object(K.a)(l,2),d=j[0],b=j[1],u=Object(N.c)((function(e){return e})).cart;Object(o.useEffect)((function(){var e=parseFloat(12*Object.keys(u).length);i(parseFloat(e)+parseFloat(function(){var e=0;return u.map((function(t){e+=t.price*t.purchaseQuantity})),parseFloat(e).toFixed(2)}())),console.log("total",a),fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:parseInt((100*a).toFixed(2))})}).then((function(e){return e.json()})).then((function(e){return n(e.clientSecret)}))}),[a]);var h={clientSecret:c,appearance:{theme:"stripe"}},O=function(){b((function(e){return e+1}))};return Object(I.jsx)("div",{children:1===d?(D.loggedIn&&(b((function(e){return e+1})),console.log(d)),Object(I.jsxs)("div",{class:"col text-center",children:[Object(I.jsx)("h1",{children:"Not logged in"}),Object(I.jsxs)("div",{children:[Object(I.jsx)("button",{class:"btn btn-primary m-2",children:"Continue as geust"}),Object(I.jsx)("p",{children:"or"}),Object(I.jsx)("button",{class:"btn btn-primary m-2",children:"Login"})]})]})):2===d?Object(I.jsxs)("div",{class:"col-6 m-3",children:[Object(I.jsx)(de,{}),Object(I.jsx)("button",{class:"btn btn-primary rounded",onClick:O,children:"Submit"})]}):3===d?Object(I.jsx)("div",{children:Object(I.jsx)("div",{className:"App col-5 mx-auto",children:c&&Object(I.jsx)(le.Elements,{options:h,stripe:be,children:Object(I.jsx)(oe,{total:a})})})}):void 0})}var he=c(15),Oe=c(98),xe=c(102),pe=c(160),me=c(155),fe=c(97),ve=c(100),ge=c(42),ye={products:[],product:[],amount:0,cart:[],cartOpen:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{products:Object(ge.a)(t.products)});case y:return Object(u.a)(Object(u.a)({},e),{},{product:t.product});case w:return Object(u.a)(Object(u.a)({},e),{},{amount:t.amount});case k:return Object(u.a)(Object(u.a)({},e),{},{cart:[].concat(Object(ge.a)(e.cart),[t.product])});case S:return Object(u.a)(Object(u.a)({},e),{},{cart:e.cart.map((function(e){return t._id===e._id&&(e.purchaseQuantity=t.purchaseQuantity),e}))});case P:return Object(u.a)(Object(u.a)({},e),{},{cartOpen:!e.cartOpen});default:return e}};var ke=we,Se=c(99),Pe=Object(Se.a)(ke),Ne=["value"],Ee=function(e){e.value;var t,c=Object(ve.a)(e,Ne),n=(t={products:[]},Object(o.useReducer)(we,t)),s=Object(K.a)(n,2),r=s[0],a=s[1];return Object(I.jsx)(N.a,Object(u.a)({store:Pe,value:[r,a]},c))},Le=Object(Oe.a)({uri:"http://localhost:3001/graphql/"}),Te=Object(fe.a)((function(e,t){var c=t.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},c),{},{authorization:n?"Bearer ".concat(n):""})}})),Ce=new xe.a({link:Te.concat(Le),cache:new pe.a});var _e=function(){return Object(I.jsx)(me.a,{client:Ce,children:Object(I.jsx)(h.a,{children:Object(I.jsxs)(Ee,{children:[Object(I.jsx)($,{}),Object(I.jsxs)(he.c,{children:[Object(I.jsx)(he.a,{exact:!0,path:"/",component:Q}),Object(I.jsx)(he.a,{exact:!0,path:"/login",component:ee}),Object(I.jsx)(he.a,{exact:!0,path:"/signup",component:ce}),Object(I.jsx)(he.a,{exact:!0,path:"/account",component:se}),Object(I.jsx)(he.a,{exact:!0,path:"/item/:_id",component:re}),Object(I.jsx)(he.a,{exact:!0,path:"/cart",component:ae}),Object(I.jsx)(he.a,{exact:!0,path:"/checkout",component:ue})]}),Object(I.jsx)(ne,{})]})})})},Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}b.a.render(Object(I.jsx)(j.a.StrictMode,{children:Object(I.jsx)(_e,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Re(t,e)}))}}()}},[[138,1,2]]]);
//# sourceMappingURL=main.ee383e14.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{106:function(e,t,c){},107:function(e,t,c){},114:function(e,t,c){},116:function(e,t,c){},127:function(e,t,c){},129:function(e,t,c){"use strict";c.r(t);var n,s,r,a,i,l,o=c(0),j=c.n(o),d=c(33),b=c.n(d),u=(c(104),c(105),c(106),c(12)),O=(c.p,c(107),c(20)),h=c(147),x=c(149),m=c(142),p=c(150),f=c(143),v=c(137),g="UPDATE_PRODUCTS",y="UPDATE_PRODUCT",w="UPDATE_AMOUNT",k="ADD_TO_CART",N="UPDATE_CART",S="TOGGLE_CART",P=c(16),E=c(42),T=c(148),L=Object(T.a)(n||(n=Object(E.a)(["\n\t{\n\t\tuser {\n\t\t\tfirstName\n\t\t\tlastName\n\t\t\temail\n\t\t\torders {\n\t\t\t\t_id\n\t\t\t\tpurchaseDate\n\t\t\t\tproducts {\n\t\t\t\t\t_id\n\t\t\t\t\tname\n\t\t\t\t\tdescription\n\t\t\t\t\tprice\n\t\t\t\t\tquantity\n\t\t\t\t\timage\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),C=Object(T.a)(s||(s=Object(E.a)(["\n\t{\n\t\tproducts {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\tquantity\n\t\t\timage\n\t\t}\n\t}\n"]))),_=Object(T.a)(r||(r=Object(E.a)(["\n\tquery Product($product: String!) {\n\t\tproduct(_id: $product) {\n\t\t\t_id\n\t\t\tname\n\t\t\tdescription\n\t\t\tprice\n\t\t\timage\n\t\t\tquantity\n\t\t}\n\t}\n"]))),R=(Object(T.a)(a||(a=Object(E.a)(["\n\tquery getCheckout($products: [ID]!) {\n\t\tcheckout(products: $products) {\n\t\t\tsession\n\t\t}\n\t}\n"]))),c(114),c(1)),A=function(e){var t=e.item;Object(P.b)(),Object(P.c)((function(e){return e}));return Object(R.jsx)("div",{class:"py-3",children:Object(R.jsxs)("div",{class:"row justify-content-evenly py-3 cart-item-shadow",children:[Object(R.jsx)("img",{class:"img-thumbnail h-100 col-3 mx-2 my-auto",src:t.image}),Object(R.jsx)("p",{class:"col-4",children:t.name}),Object(R.jsxs)("p",{class:"col-2",children:["$",t.price]}),Object(R.jsxs)("p",{class:"col-2",children:["QTY:",t.purchaseQuantity]})]})})},F=c(22),I=c(23),U=c(75),$=new(function(){function e(){Object(F.a)(this,e)}return Object(I.a)(e,[{key:"getProfile",value:function(){return Object(U.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(U.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),D=(c(116),function(){var e=Object(P.b)(),t=Object(P.c)((function(e){return e})),c=t.cart,n=t.cartOpen,s=Object(v.a)(L),r=(s.loading,s.data),a=function(){e({type:S})},i=function(){var e=0;return c.map((function(t){e+=t.price*t.purchaseQuantity})),e.toFixed(2)},l=function(){if(0===Object.keys(c).length)return Object(R.jsx)("h1",{class:"text-center",children:"Empty"})};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(x.a,{variant:"light",className:"py-0 bg-black",children:Object(R.jsxs)(m.a,{fluid:!0,children:[Object(R.jsx)(x.a.Brand,{className:"text-white",as:O.b,to:"/",children:"Demo"}),Object(R.jsxs)("div",{class:"row inline",children:[Object(R.jsxs)(p.a,{inline:!0,as:f.a,children:[Object(R.jsx)(p.a.Group,{children:Object(R.jsx)(p.a.Control,{type:"search",placeholder:"search"})}),Object(R.jsx)("button",{class:"px-3 m-2 btn btn-outline-success",variant:"outline-success",type:"submit",children:"Search"})]}),function(){return $.loggedIn()?r?(e=r.user,Object(R.jsxs)(h.a,{className:"m-3",children:[Object(R.jsxs)(h.a.Toggle,{variant:"primary",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:["Hello, ",e.firstName]}),Object(R.jsxs)(h.a.Menu,{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(R.jsx)(O.b,{to:"/account",children:Object(R.jsx)("a",{class:"dropdown-item",children:"Account"})}),Object(R.jsx)(h.a.Item,{class:"dropdown-item",href:"#",children:"Order History"}),Object(R.jsx)(h.a.Divider,{}),Object(R.jsx)(h.a.Item,{class:"dropdown-item",onClick:function(){return $.logout()},children:"Logout"})]})]})):void 0:Object(R.jsx)(O.b,{to:"/login",children:Object(R.jsx)("button",{class:" m-3 inline btn btn-primary",children:"Login"})});var e}(),n?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)("a",{onClick:a,children:Object(R.jsx)("i",{class:"text-white bi bi-bag-x bag-icon"})})}):Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("a",{class:"",href:"#",onClick:a,children:[Object(R.jsx)("i",{class:"bi bi-bag-fill bag-icon my-auto "}),Object(R.jsx)("span",{class:"text-dark text-center cart-items align-text-bottom",children:c.length})]})})]})]})}),function(){if(n)return Object(R.jsxs)("div",{class:"col-5 cart-menu bg-light p-3 rounded border",children:[Object(R.jsx)("a",{class:"row justify-content-end px-4 py-auto",onClick:a,children:Object(R.jsx)("i",{class:" bi-x-circle-fill text-danger"})}),Object(R.jsxs)("div",{class:"cart-list overflow-scroll col",children:[c.map((function(e){return Object(R.jsx)(A,{item:e},e.id)})),l()]}),Object(R.jsxs)("h2",{children:["Total: $",i()]}),Object(R.jsx)(O.b,{to:"/cart",children:Object(R.jsx)("button",{class:"btn rounded-pill btn-primary",children:"Checkout"})})]})}()]})}),q=function(){return Object(R.jsx)("div",{children:Object(R.jsx)("h1",{class:"align-center text-center py-5",children:"Hello"})})},B=c(144),M=(c(127),function(e){var t=e._id,c=e.name,n=e.price,s=(e.quantity,e.image),r=Object(P.b)(),a=Object(P.c)((function(e){return e})).cart;return Object(R.jsxs)("div",{class:"item-container col text-center my-3",children:[Object(R.jsx)(O.b,{to:"/item/".concat(t),children:Object(R.jsxs)("div",{class:"text-dark text-center mb-1",children:[Object(R.jsx)("div",{class:"item-image-container",children:Object(R.jsx)("img",{class:"img-fluid item-image p-3",src:s})}),Object(R.jsx)("p",{class:"font-weight-bold item-title align-text-bottom overflow-hidden px-1",children:c}),Object(R.jsxs)("span",{class:"item-price",children:["$",n]}),Object(R.jsx)("br",{})]})}),Object(R.jsx)("button",{class:"btn btn-primary rounded-pill",onClick:function(){var c=a.find((function(e){return e._id===t}));r(c?{type:N,_id:t,purchaseQuantity:parseInt(c.purchaseQuantity)+1}:{type:k,product:Object(u.a)(Object(u.a)({},e),{},{purchaseQuantity:1})})},children:"Add to Cart"})]})}),Q=function(){var e=Object(P.b)(),t=Object(P.c)((function(e){return e})),c=Object(v.a)(C),n=c.loading,s=c.data;t.products;return Object(o.useEffect)((function(){s?(e({type:g,products:s.products}),console.log("data",s)):n&&console.log("loading",n)}),[s,e]),Object(R.jsx)("div",{children:Object(R.jsx)("div",{class:"container",children:Object(R.jsx)("div",{class:"row align-items-center",children:t.products.map((function(e){return Object(R.jsx)("div",{class:"col-3 ",children:Object(R.jsx)(M,{_id:e._id,name:e.name,price:e.price,quantity:e.quantity,image:e.image},e._id)})}))})})})},H=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(q,{}),Object(R.jsx)(B.a,{fluid:!0,className:"bg-white",children:Object(R.jsx)(m.a,{children:Object(R.jsx)(Q,{})})})]})},W=c(50),Y=c(32),J=c.n(Y),G=c(46),K=c(13),z=c(145),Z=Object(T.a)(i||(i=Object(E.a)(["\n\tmutation login($email: String!, $password: String!) {\n\t\tlogin(email: $email, password: $password) {\n\t\t\ttoken\n\t\t\tuser {\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),V=Object(T.a)(l||(l=Object(E.a)(["\n\tmutation createUser($email: String!, $password: String!, $firstName: String!, $lastName: String!){\n\t\tcreateUser(email: $email, password: $password, firstName: $firstName, lastName: $lastName){\n\t\t\ttoken\n\t\t\tuser{\n\t\t\t\t_id\n\t\t\t}\n\t\t}\n\t}\n"]))),X=function(){var e=Object(o.useState)({email:"",password:""}),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(z.a)(Z),r=Object(K.a)(s,2),a=r[0],i=r[1].error,l=function(){var e=Object(G.a)(J.a.mark((function e(t){var n,s;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(c.email,c.password),e.prev=2,e.next=5,a({variables:{email:c.email,password:c.password}});case 5:n=e.sent,s=n.data.login.token,$.login(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(G.a)(J.a.mark((function e(t){var s,r,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target,r=s.name,a=s.value,console.log(r,a),n(Object(u.a)(Object(u.a)({},c),{},Object(W.a)({},r,a)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsx)("div",{class:"col-6 mx-auto py-4",children:Object(R.jsxs)("div",{class:"border bg-light rounded rounded-3 p-4",children:[Object(R.jsx)("h1",{class:"text-center",children:"Login"}),Object(R.jsxs)("form",{onSubmit:l,children:[Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col mb-3",children:[Object(R.jsx)("label",{for:"email",className:"form-label",children:"Email"}),Object(R.jsx)("input",{type:"email",name:"email",className:"form-control",id:"email",placeholder:"example@email.com",required:!0,onChange:j})]})}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col mb-3",children:[Object(R.jsx)("label",{for:"password",className:"form-label",children:"Password"}),Object(R.jsx)("input",{type:"password",name:"password",className:"form-control",id:"password",placeholder:"password",required:!0,onChange:j})]})}),Object(R.jsx)("div",{className:"text-center",children:Object(R.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Login"})}),i?Object(R.jsx)("div",{children:Object(R.jsx)("p",{class:"",children:"make sure all fields are required"})}):null]}),Object(R.jsx)(O.b,{to:"/signup",children:Object(R.jsx)("a",{class:"d-flex justify-content-center p-3",children:"Create an account and sign up"})})]})})},ee=function(){var e=Object(o.useState)({email:"",password:"",firstName:"",lastName:"",validPassword:"",confirmPassword:""}),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(z.a)(V),r=Object(K.a)(s,2),a=r[0],i=r[1].error,l=function(){var e=Object(G.a)(J.a.mark((function e(t){var s,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c.password===c.confirmPassword?n(Object(u.a)(Object(u.a)({},c),{},{validPassword:c.password})):n(Object(u.a)({},c)),e.prev=2,e.next=5,a({variables:{email:c.email,password:c.validPassword,firstName:c.firstName,lastName:c.lastName}});case 5:s=e.sent,r=s.data.createUser.token,$.login(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.target,s=t.name,r=t.value;console.log(s,r),n(Object(u.a)(Object(u.a)({},c),{},Object(W.a)({},s,r)))};return Object(R.jsx)("div",{class:"col-6 mx-auto py-4",children:Object(R.jsxs)("div",{class:"border bg-light rounded rounded-3 p-4",children:[Object(R.jsx)("h1",{class:"text-center",children:"Signup"}),Object(R.jsxs)("form",{onSubmit:l,children:[Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{class:"col mb-3",children:[Object(R.jsx)("label",{for:"firstName",class:"form-label",children:"First name"}),Object(R.jsx)("input",{type:"firstName",name:"firstName",class:"form-control",id:"firstName",placeholder:"Mark",required:!0,onChange:j})]}),Object(R.jsxs)("div",{class:"col mb-3",children:[Object(R.jsx)("label",{for:"lastName",class:"form-label",children:"Last name"}),Object(R.jsx)("input",{type:"lastName",name:"lastName",class:"form-control",id:"lastName",placeholder:"Otto",required:!0,onChange:j})]})]}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{class:"col mb-3",children:[Object(R.jsx)("label",{for:"email",class:"form-label",children:"Email"}),Object(R.jsx)("input",{type:"email",name:"email",class:"form-control",id:"email",required:!0,onChange:j})]})}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col mb-3",children:[Object(R.jsx)("label",{for:"password",className:"form-label",children:"Password:"}),Object(R.jsx)("input",{type:"password",className:"form-control",id:"password",required:!0,onChange:j})]})}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col mb-3",children:[Object(R.jsx)("label",{for:"confirmPassword",className:"form-label",children:"Confirm Password:"}),Object(R.jsx)("input",{type:"password",className:"form-control",id:"confrimPassword",required:!0,onChange:j})]})}),Object(R.jsx)("div",{class:"text-center",children:Object(R.jsx)("button",{class:"btn btn-primary",type:"submit",children:"Submit form"})}),i?Object(R.jsx)("div",{children:Object(R.jsx)("p",{class:"",children:"make sure all fields are required"})}):null]})]})})},te=function(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(m.a,{fluid:!0,className:"bg-dark",children:[Object(R.jsxs)(f.a,{children:[Object(R.jsx)("div",{class:"col-6 col-md-8 col-lg-7",children:Object(R.jsxs)("div",{class:"row text-center m-auto",children:[Object(R.jsx)("div",{class:"col-sm-6 col-md-4 col-lg-4 col-12 py-4",children:Object(R.jsxs)("ul",{class:"list-unstyled",children:[Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]})]})}),Object(R.jsx)("div",{class:"col-sm-6 col-md-4 col-lg-4 col-12 py-4",children:Object(R.jsxs)("ul",{class:"list-unstyled",children:[Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]}),Object(R.jsxs)("li",{class:"btn-link",children:[" ",Object(R.jsx)("a",{children:"Link anchor"})," "]})]})})]})}),Object(R.jsxs)("div",{class:"col-md-4 col-lg-5 col-6 py-4",children:[Object(R.jsxs)("address",{class:"text-white",children:[Object(R.jsx)("strong",{children:"MyStoreFront, Inc."}),Object(R.jsx)("br",{}),"Indian Treasure Link",Object(R.jsx)("br",{}),"Quitman, WA, 99110-0219",Object(R.jsx)("br",{}),Object(R.jsx)("abbr",{title:"Phone",children:"P:"})," (123) 456-7890"]}),Object(R.jsxs)("address",{class:"text-white",children:[Object(R.jsx)("strong",{children:"Full Name"}),Object(R.jsx)("br",{}),Object(R.jsx)("a",{href:"mailto:#",children:"first.last@example.com"})]})]})]}),Object(R.jsx)(f.a,{children:Object(R.jsx)("p",{class:"text-white m-auto p-2",children:"\xa92021 copyrihgt"})})]})})},ce=c(90),ne=function(){var e,t=Object(v.a)(L),c=(t.loading,t.error,t.data);return Object(R.jsxs)(f.a,{className:"justify-content-md-center py-5",children:[Object(R.jsxs)(ce.a,{md:6,children:[Object(R.jsx)("h1",{children:"Account Info:"}),function(){if(c)return e=c.user,Object(R.jsxs)("div",{class:"",children:[Object(R.jsxs)("h4",{children:["Name: ",e.firstName," ",e.lastName]}),Object(R.jsxs)("h4",{children:["Email: ",e.email]})]})}()]}),Object(R.jsx)("a",{class:"text-decoration-underline fs-1",children:"Logout"})]})},se=function(e){var t=e.match,c=Object(P.b)(),n=Object(P.c)((function(e){return e})),s=t.params._id,r=Object(v.a)(_,{variables:{product:s}}),a=(r.loading,r.data),i=n.product,l=n.amount;return Object(o.useEffect)((function(){a&&c({type:y,product:a.product})}),[a]),Object(R.jsx)("div",{class:"container my-auto",children:Object(R.jsxs)("div",{class:"row m-4 justify-content-center",children:[Object(R.jsx)("img",{class:"col-sm-10 h-100 col-lg-5 p-3 my-auto",src:i.image}),Object(R.jsxs)("div",{class:"col justify-content-left",children:[Object(R.jsx)("div",{class:"title-text",children:i.name}),Object(R.jsx)("div",{class:"fs-2 description-text",children:i.description}),Object(R.jsxs)("div",{class:"py-3 price-text",children:["$",i.price]}),Object(R.jsxs)("div",{class:"row px-3",children:[Object(R.jsx)("div",{class:"text-left",children:Object(R.jsx)("button",{class:"btn btn-primary rounded-pill ",children:"add to cart"})}),Object(R.jsxs)("div",{class:"row px-5",children:[Object(R.jsx)("button",{class:"btn btn-dark rounded-pill",onClick:function(){l>0&&c({type:w,amount:l-1})},children:Object(R.jsx)("i",{class:"bi bi-dash"})}),Object(R.jsx)("p",{class:"px-2 my-auto",children:l}),Object(R.jsx)("button",{class:"btn btn-dark rounded-pill",onClick:function(){c({type:w,amount:l+1})},children:Object(R.jsx)("i",{class:"bi bi-plus"})})]})]})]})]})})},re=function(){var e=Object(P.c)((function(e){return e})).cart,t=parseFloat(12*Object.keys(e).length).toFixed(2),c=function(){var t=0;return e.map((function(e){t+=e.price*e.purchaseQuantity})),parseFloat(t.toFixed(2))};return Object(R.jsxs)("div",{class:"container",children:[Object(R.jsx)("h1",{children:"cart"}),Object(R.jsxs)("div",{class:"row",children:[Object(R.jsx)("div",{class:"col-7 ",children:e.map((function(e){return Object(R.jsx)("div",{children:Object(R.jsx)(A,{item:e},e.id)})}))}),Object(R.jsxs)("div",{class:"col-4 align-self-start border mx-auto m-3",children:[Object(R.jsx)("h1",{class:"row p-2",children:"Summary"}),Object(R.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(R.jsx)("h4",{children:"Subtotal:"}),Object(R.jsxs)("h5",{class:"",children:["$",c()]})]}),Object(R.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(R.jsx)("h4",{children:"Shipping:"}),Object(R.jsxs)("h5",{class:"",children:["$",t]})]}),Object(R.jsx)("p",{class:"row px-3",children:"Estimate fixed-rate"}),Object(R.jsxs)("div",{class:"row d-flex justify-content-between align-items-center p-3",children:[Object(R.jsx)("h4",{children:"tax:"}),Object(R.jsx)("h5",{class:""})]}),Object(R.jsx)("br",{}),Object(R.jsxs)("div",{class:"row d-flex justify-content-between align-items-center px-3",children:[Object(R.jsx)("h3",{children:"Total:"}),Object(R.jsxs)("h5",{class:"",children:["$",parseFloat(t)+parseFloat(c())]})]}),Object(R.jsx)("div",{class:"row",children:Object(R.jsx)(O.b,{to:"/checkout",children:Object(R.jsx)("button",{class:"btn btn-primary rounded-pill m-3 mx-auto",children:"Checkout"})})})]})]})]})},ae=c(91),ie=c(55);function le(e){var t=e.total,c=Object(ie.useStripe)(),n=Object(ie.useElements)(),s=Object(o.useState)(null),r=Object(K.a)(s,2),a=r[0],i=r[1],l=Object(o.useState)(!1),j=Object(K.a)(l,2),d=j[0],b=j[1];Object(o.useEffect)((function(){if(c){var e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");e&&c.retrievePaymentIntent(e).then((function(e){switch(e.paymentIntent.status){case"succeeded":i("Payment succeeded!");break;case"processing":i("Your payment is processing.");break;case"requires_payment_method":i("Your payment was not successful, please try again.");break;default:i("Something went wrong.")}}))}}),[c]);var u=function(){var e=Object(G.a)(J.a.mark((function e(t){var s,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c&&n){e.next=3;break}return e.abrupt("return");case 3:return b(!0),e.next=6,c.confirmPayment({elements:n,confirmParams:{return_url:"http://localhost:3000/checkout"}});case 6:s=e.sent,"card_error"===(r=s.error).type||"validation_error"===r.type?i(r.message):i("An unexpected error occured."),b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)("form",{id:"payment-form",onSubmit:u,children:[Object(R.jsx)("h1",{children:"Payment"}),Object(R.jsx)(ie.PaymentElement,{id:"payment-element"}),Object(R.jsx)("button",{class:"btn btn-primary rounded m-3",disabled:d||!c||!n,id:"submit",children:Object(R.jsx)("span",{id:"button-text",children:d?Object(R.jsxs)("div",{className:"spinner",id:"spinner",children:[Object(R.jsx)("strong",{children:"Loading..."}),Object(R.jsx)("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]}):"Pay now"})}),Object(R.jsxs)("p",{children:["charge amount",t]}),a&&Object(R.jsx)("div",{id:"payment-message",children:a})]})}var oe=function(){return Object(R.jsxs)("form",{children:[Object(R.jsxs)("div",{class:"row mb-4",children:[Object(R.jsx)("div",{class:"col",children:Object(R.jsxs)("div",{class:"form-outline",children:[Object(R.jsx)("input",{type:"text",id:"form7Example1",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example1",children:"First name"})]})}),Object(R.jsx)("div",{class:"col",children:Object(R.jsxs)("div",{class:"form-outline",children:[Object(R.jsx)("input",{type:"text",id:"form7Example2",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example2",children:"Last name"})]})})]}),Object(R.jsxs)("div",{class:"form-outline mb-4",children:[Object(R.jsx)("input",{type:"text",id:"form7Example3",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example3",children:"Company name"})]}),Object(R.jsxs)("div",{class:"form-outline mb-4",children:[Object(R.jsx)("input",{type:"text",id:"form7Example4",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example4",children:"Address"})]}),Object(R.jsxs)("div",{class:"input-group row mb-4",children:[Object(R.jsxs)("div",{class:"col",children:[Object(R.jsxs)("select",{class:"form-control",children:[Object(R.jsx)("option",{selected:!0,children:"- Select -"}),Object(R.jsx)("option",{value:"APT",children:"APT - Apartment"}),Object(R.jsx)("option",{value:"BSMT",children:"BSMT - Basement"}),Object(R.jsx)("option",{value:"BLDG",children:"BLDG - Building"}),Object(R.jsx)("option",{value:"DEPT",children:"DEPT - Department"}),Object(R.jsx)("option",{value:"FL",children:"FL - Floor"}),Object(R.jsx)("option",{value:"FRNT",children:"FRNT - Front"}),Object(R.jsx)("option",{value:"HNGR",children:"HNGR - Hanger"}),Object(R.jsx)("option",{value:"KEY",children:"KEY - Key"}),Object(R.jsx)("option",{value:"LBBY",children:"LBBY - Lobby"}),Object(R.jsx)("option",{value:"LOT",children:"LOT - Lot"}),Object(R.jsx)("option",{value:"LOWR",children:"LOWR - Lower"}),Object(R.jsx)("option",{value:"OFC",children:"OFC - Office"}),Object(R.jsx)("option",{value:"OTHER",children:"Other"}),Object(R.jsx)("option",{value:"PH",children:"PH - Penthouse"}),Object(R.jsx)("option",{value:"PIER",children:"PIER - Pier"}),Object(R.jsx)("option",{value:"REAR",children:"REAR - Rear"}),Object(R.jsx)("option",{value:"RM",children:"RM - Room"}),Object(R.jsx)("option",{value:"SIDE",children:"SIDE - Side"}),Object(R.jsx)("option",{value:"SLIP",children:"SLIP - Slip"}),Object(R.jsx)("option",{value:"SPC",children:"SPC - Space"}),Object(R.jsx)("option",{value:"STOP",children:"STOP - Stop"}),Object(R.jsx)("option",{value:"STE",children:"STE - Suite"}),Object(R.jsx)("option",{value:"TRLR",children:"TRLR - Trailer"}),Object(R.jsx)("option",{value:"UNAVAILABLE",children:"Unable to determine"}),Object(R.jsx)("option",{value:"UNIT",children:"UNIT - Unit"}),Object(R.jsx)("option",{value:"UPPR",children:"UPPR - Upper"})]}),Object(R.jsx)("label",{class:"form-label",for:"apt-suite-other",children:"Unit type"})]}),Object(R.jsxs)("div",{class:"col",children:[Object(R.jsx)("input",{class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"",children:"unit number"})]})]}),Object(R.jsxs)("div",{class:"form-outline mb-4 row",children:[Object(R.jsxs)("div",{class:"col inline-block",children:[Object(R.jsx)("input",{class:"form-control",type:"text",id:"city"}),Object(R.jsx)("label",{class:"form-label",children:"City"})]}),Object(R.jsxs)("div",{class:"col",children:[Object(R.jsx)("input",{class:"form-control",type:"text"}),Object(R.jsx)("label",{class:"form-label",children:"state"})]})]}),Object(R.jsxs)("div",{class:"form-outline mb-4",children:[Object(R.jsx)("input",{type:"email",id:"form7Example5",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example5",children:"Email"})]}),Object(R.jsxs)("div",{class:"form-outline mb-4",children:[Object(R.jsx)("input",{type:"number",id:"form7Example6",class:"form-control"}),Object(R.jsx)("label",{class:"form-label",for:"form7Example6",children:"Phone"})]})]})},je=function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Shipping Address"}),Object(R.jsx)(oe,{type:"shipping"})]})},de=Object(ae.a)("pk_test_51KYfOOHOMpPyIznJJw8smgIiP7aaOygzJAcRCiNvZYzZq0lz5NJumR9QnhS1xZCSf1KcPAUYKZHo2tU2NmlLTJvO00kR88grXB");function be(){var e=Object(o.useState)(""),t=Object(K.a)(e,2),c=t[0],n=t[1],s=Object(o.useState)(0),r=Object(K.a)(s,2),a=r[0],i=r[1],l=Object(o.useState)(1),j=Object(K.a)(l,2),d=j[0],b=j[1],u=Object(P.c)((function(e){return e})).cart;Object(o.useEffect)((function(){var e=parseFloat(12*Object.keys(u).length);i(parseFloat(e)+parseFloat(function(){var e=0;return u.map((function(t){e+=t.price*t.purchaseQuantity})),parseFloat(e).toFixed(2)}())),console.log("total",a),fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:parseInt((100*a).toFixed(2))})}).then((function(e){return e.json()})).then((function(e){return n(e.clientSecret)}))}),[a]);var O={clientSecret:c,appearance:{theme:"stripe"}},h=function(){b((function(e){return e+1}))};return Object(R.jsx)("div",{children:1===d?($.loggedIn&&(b((function(e){return e+1})),console.log(d)),Object(R.jsxs)("div",{class:"col text-center",children:[Object(R.jsx)("h1",{children:"Not logged in"}),Object(R.jsxs)("div",{children:[Object(R.jsx)("button",{class:"btn btn-primary m-2",children:"Continue as geust"}),Object(R.jsx)("p",{children:"or"}),Object(R.jsx)("button",{class:"btn btn-primary m-2",children:"Login"})]})]})):2===d?Object(R.jsxs)("div",{class:"col-6 m-3",children:[Object(R.jsx)(je,{}),Object(R.jsx)("button",{class:"btn btn-primary rounded",onClick:h,children:"Submit"})]}):3===d?Object(R.jsx)("div",{children:Object(R.jsx)("div",{className:"App col-5 mx-auto",children:c&&Object(R.jsx)(ie.Elements,{options:O,stripe:de,children:Object(R.jsx)(le,{total:a})})})}):void 0})}var ue=c(14),Oe=c(93),he=c(97),xe=c(151),me=c(146),pe=c(92),fe=c(95),ve=c(40),ge={products:[],product:[],amount:0,cart:[],cartOpen:!1},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{products:Object(ve.a)(t.products)});case y:return Object(u.a)(Object(u.a)({},e),{},{product:t.product});case w:return Object(u.a)(Object(u.a)({},e),{},{amount:t.amount});case k:return Object(u.a)(Object(u.a)({},e),{},{cart:[].concat(Object(ve.a)(e.cart),[t.product])});case N:return Object(u.a)(Object(u.a)({},e),{},{cart:e.cart.map((function(e){return t._id===e._id&&(e.purchaseQuantity=t.purchaseQuantity),e}))});case S:return Object(u.a)(Object(u.a)({},e),{},{cartOpen:!e.cartOpen});default:return e}};var we=ye,ke=c(94),Ne=Object(ke.a)(we),Se=["value"],Pe=function(e){e.value;var t,c=Object(fe.a)(e,Se),n=(t={products:[]},Object(o.useReducer)(ye,t)),s=Object(K.a)(n,2),r=s[0],a=s[1];return Object(R.jsx)(P.a,Object(u.a)({store:Ne,value:[r,a]},c))},Ee=Object(Oe.a)({uri:"/graphql/"}),Te=Object(pe.a)((function(e,t){var c=t.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},c),{},{authorization:n?"Bearer ".concat(n):""})}})),Le=new he.a({link:Te.concat(Ee),cache:new xe.a});var Ce=function(){return Object(R.jsx)(me.a,{client:Le,children:Object(R.jsx)(O.a,{children:Object(R.jsxs)(Pe,{children:[Object(R.jsx)(D,{}),Object(R.jsxs)(ue.c,{children:[Object(R.jsx)(ue.a,{exact:!0,path:"/",component:H}),Object(R.jsx)(ue.a,{exact:!0,path:"/login",component:X}),Object(R.jsx)(ue.a,{exact:!0,path:"/signup",component:ee}),Object(R.jsx)(ue.a,{exact:!0,path:"/account",component:ne}),Object(R.jsx)(ue.a,{exact:!0,path:"/item/:_id",component:se}),Object(R.jsx)(ue.a,{exact:!0,path:"/cart",component:re}),Object(R.jsx)(ue.a,{exact:!0,path:"/checkout",component:be})]}),Object(R.jsx)(te,{})]})})})},_e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}b.a.render(Object(R.jsx)(j.a.StrictMode,{children:Object(R.jsx)(Ce,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");_e?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Re(t,e)}))}}()}},[[129,1,2]]]);
//# sourceMappingURL=main.6c6daedb.chunk.js.map